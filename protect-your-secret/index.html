<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />

    <title>sunu's weblog - On programming and stuff.</title>
    <meta name="description" content="Weblog of Tarashish Mishra; On programming and stuff." />

    <meta name="HandheldFriendly" content="True" />
    <meta name="MobileOptimized" content="320" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <link rel="stylesheet" type="text/css" href="/assets/css/screen.css" />
    <link rel="stylesheet" type="text/css" href="//fonts.googleapis.com/css?family=Merriweather:300,700,700italic,300italic|Open+Sans:700,400" />
    <!-- Customisation  -->
    <link rel="stylesheet" type="text/css" href="/assets/css/main.css" />

</head>
<body class="post-template">

    <header class="main-header post-head no-cover">
    <nav class="main-nav  clearfix">
        <a class="back-button icon-arrow-left" href="/">Home</a>
        <a class="subscribe-button icon-feed" href="/rss.xml">Subscribe</a>
    </nav>
</header>

<main class="content" role="main">

    <article class="post">

        <header class="post-header">
            <h1 class="post-title">Protect your secrets!</h1>
            <section class="post-meta">
                <time class="post-date" datetime="2014-03-29">29 Mar 2014</time>
                
                    on <a href="/tag/programming/" rel="tag">programming</a>, <a href="/tag/gsoc/" rel="tag">gsoc</a>
                
            </section>
        </header>

<!--         <header class="post-header">
            <a id="blog-logo" href="sunu.in">
                
                    <span class="blog-title">sunu's weblog</span>
                
            </a>
        </header> -->

        <!-- <span class="post-meta">
            <time datetime="2014-03-29">29 Mar 2014</time>
            
        </span> -->

        <!-- <h1 class="post-title">Protect your secrets!</h1> -->

        <section class="post-content">
            <p>Django has a SECRET_KEY settings among many others. This SECRET_KEY is really important for security purposes as it is used for cryptographic signing functionality in Django (<a href="https://docs.djangoproject.com/en/dev/topics/signing/">More</a> about cryptographic signing). We are expected to keep the value secret. Running Django with a known SECRET_KEY defeats many of Djangoâ€™s security protections, and can lead to privilege escalation and remote code execution vulnerabilities.</p>

<p>So putting the SECRET_KEY setting of Django in version control and putting the code out on a public repository on Github or Bitbucket is not really a good idea and should be avoided. Same can be said for other secret keys like API keys for different services, OAuth tokens, passwords for your database. They are all supposed to be, you know, &quot;secret&quot;!</p>

<p><img src="http://i.imgur.com/G0qc8Lr.gif" alt="Secret"></p>

<p>As a solution to this problem, most people edit this configurations on the production machine. Unfortunately, it is not a good idea. Editing source files on production is often troublesome. Also, while editing these keys in your development setup, you may just commit and push them accidentally to the public repository. So this practice is somewhat troublesome and dangerous.</p>

<h2>Environment variables to the rescue</h2>

<p>Environment variables are the answer to our problem. Using environment variables to store our secret keys gives us a ton of benefits.</p>

<ul>
<li>We can now put all our settings files in version control without hesitation.</li>
<li>No need to edit source files on production.</li>
<li>No risk of accidentally committing secret keys.</li>
</ul>

<p><img src="http://i.imgur.com/EuEKhSr.gif" alt="Yay!"></p>

<h2>How to set environment variables</h2>

<p>Environment variables can be set easily using bash commands. For example:</p>
<div class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nv">$ </span><span class="nb">export </span><span class="nv">MY_SECRET_KEY</span><span class="o">=</span>SuP3r-S3Kr31-K3y
</code></pre></div>
<p>We can put this line at the end of our <code>.bashrc</code> or <code>.bash_profile</code> files. Another way to do this for individual projects is to put this line at the end of <code>bin/activate</code> script of the virtualenv.</p>

<p>Most platform-as-a-service platforms also provide ways to set environment variables easily. For example, on Heroku you can set environment variables like this.</p>
<div class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nv">$ </span><span class="nb">cd </span>myapp
<span class="nv">$ </span>heroku config:set <span class="nv">SECRET_KEY</span><span class="o">=</span>mySuP3rS3cr31K3yRul3s
</code></pre></div>
<p>Here is the <a href="https://devcenter.heroku.com/articles/config-vars">documentation</a> from Heroku.</p>

<p>These environment variables can be easily accessed in the settings file to set the secret key by doing something like:</p>
<div class="highlight"><pre><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">os</span>
<span class="n">SOME_SECRET_KEY</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s">&quot;SOME_SECRET_KEY&quot;</span><span class="p">]</span>
</code></pre></div>
<p>And that&#39;s the way to do it.</p>

        </section>

        

        <footer class="post-footer">
            <!-- If we want to display author's name and bio -->
            
                <figure class="author-image">
                    <a class="img" href="/" style="background-image: url(/assets/images/profile.jpeg)">
                    <span class="hidden">Tarashish Mishra's Picture</span></a>
                </figure>
                <section class="author">
                    <!-- Author Name -->
                    <h4> Tarashish Mishra </h4>
                    <!-- Author Bio -->
                    <p>
                        Hi, I'm sunu.
                        I'm a programmer. I like Python, travelling and animated cat/dog pictures. This blog is about my adventures and experience with code, travel and life. Contact me via <a href="mailto:sunu@sunu.in">mail</a>, <a href="https://twitter.com/tarashish">Twitter</a> or <a href="https://github.com/sunu">Github</a>.
                    </p>
                </section>
            

            <!-- Share links section -->
            <section class="share">
    <h4>Share this post</h4>
    <a class="icon-twitter" href="http://twitter.com/share?text=Protect your secrets!&amp;url=http://sunu.in/protect-your-secret"
        onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;">
        <span class="hidden">Twitter</span>
    </a>
    <a class="icon-facebook" href="https://www.facebook.com/sharer/sharer.php?u=http://sunu.in/protect-your-secret"
        onclick="window.open(this.href, 'facebook-share','width=580,height=296');return false;">
        <span class="hidden">Facebook</span>
    </a>
    <a class="icon-google-plus" href="https://plus.google.com/share?url=http://sunu.in/protect-your-secret"
       onclick="window.open(this.href, 'google-plus-share', 'width=490,height=530');return false;">
        <span class="hidden">Google+</span>
    </a>
</section>


            <!-- Disqus comments -->
            
                <section class="disqus">
    <div id="disqus_thread"></div>
    <script type="text/javascript">

        var disqus_shortname = 'sunuin';
        (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
</section>

            

        </footer>

    </article>

</main>

    <footer class="site-footer clearfix">
      <section class="copyright">
        <a href="/">sunu's weblog</a> &copy; 
               &bull; All rights reserved.
      </section>
      <section class="poweredby">Made with Jekyll using 
        <a href="http://github.com/rosario/kasper">Kasper theme</a>
      </section>
    </footer>
    
    <script type="text/javascript" src="/assets/js/jquery-1.11.1.min.js"></script>
    <script type="text/javascript" src="/assets/js/jquery.fitvids.js"></script>
    <script type="text/javascript" src="/assets/js/index.js"></script>

    <!-- Google Analytics Tracking code -->
    <script type="text/javascript">

      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-XXXXXXXX-X']);
      _gaq.push(['_trackPageview']);

      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();

    </script>   
</body>
</html>
